<Window x:Class="ImageProcessSuite.ThresholdDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="二値化" Width="420" Height="220"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        ShowInTaskbar="False">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- タブ：固定 / Otsu -->
        <TabControl x:Name="ModeTabs" Grid.Row="0" Margin="0,0,0,8" SelectionChanged="ModeTabs_SelectionChanged">
            <!-- 固定しきい値 -->
            <TabItem Header="固定しきい値">
                <Grid Margin="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8">
                        <TextBlock Text="閾値 (0〜255):" VerticalAlignment="Center"/>
                        <TextBox x:Name="ValueBox" Width="80" Margin="8,0,0,0" Text="128"
                     VerticalContentAlignment="Center"/>
                    </StackPanel>
                    <Slider x:Name="ValueSlider" Grid.Row="1" Minimum="0" Maximum="255"
                  TickFrequency="1" IsSnapToTickEnabled="True"/>
                </Grid>
            </TabItem>

            <!-- Otsu -->
            <TabItem Header="Otsu（自動）">
                <StackPanel Margin="8">
                    <TextBlock Text="Otsu の自動しきい値で二値化します。" Margin="0,0,0,8"/>
                    <TextBlock Text="※入力画像のヒストグラムから自動計算されます。" Opacity="0.7"/>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- 反転チェックは共通 -->
        <CheckBox x:Name="InvertCheck" Grid.Row="1" Content="反転（黒白反転）" Margin="0,0,0,8"/>

        <!-- ボタン群 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="OK" Width="80" Margin="0,0,8,0" IsDefault="True" Click="Ok_Click"/>
            <Button Content="キャンセル" Width="80" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>